<% include ../header.ejs %>
<% include ../navbar.ejs %>
<% include ../sidebar.ejs %>

<!--**********************************
            Content body start
        ***********************************-->
<div class="content-body">

  <div class="row page-titles mx-0">
    <div class="col p-md-0">
      <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="/admin/dashboard">Dashboard</a></li>
        <li class="breadcrumb-item active"><a href="/admin/subcategory">Back</a></li>
      </ol>
    </div>
  </div>
  <!-- row -->

  <div class="container-fluid">
    <div class="row justify-content-center">
      <div class="col-lg-12">

        <div class="card">

          <div class="card-body">
            <h4 class="card-title">SubCategory Edit</h4>
            <div class="form-validation">
              <form class="form-valide" action="/admin/subcategory_edit" method="post" name="myForm" onsubmit="return validateForm()"  enctype="multipart/form-data">
                <div class="form-group row">
                  <label class="col-lg-4 col-form-label" for="val-username">Name <span class="text-danger">*</span>
                  </label>

                  <input type="hidden" name="id" value="<%=response.dataValues.id%>">
                  <div class="col-lg-6">
                    <input type="text" class="form-control" id="name" name="name" onkeyup="validateForm()" placeholder="Enter a Name.."
                      value="<%=response.dataValues.name%>">
                      <span id="p2" style="display: none;color:#ff5e5e;width: 100%;margin-top: 0.25rem;font-size: 80%;">This field is required.</span>
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-lg-4 col-form-label">Select Category</label>
                  <div class="col-lg-6">
                    <select class="form-control" name="txtid">

                      <option value="<%=response.categoryId%>"<%=response.categoryId == response.categoryId  ? 'selected' : ''; %>><%=response.dataValues.categoryname%></option>
                      <% for(i in allsubcat){%>
                      <option value="<%= allsubcat[i].id %>"><%= allsubcat[i].name %></option>

                      <% } %>
                    </select>
                  </div>
                </div>
                <div class="form-group row">
                  <label class="col-lg-4 col-form-label" for="val-email">Description <span class="text-danger"></span>
                  </label>
                  <div class="col-lg-6">
                    <textarea class="form-control" name="description" rows="2" cols="4"
                      placeholder="Enter a  description.."><%=response.dataValues.description%></textarea>

                  </div>
                </div>


                <div class="form-group row">
                  <label class="col-lg-4 col-form-label" for="val-suggestions">Image <span class="text-danger">*</span>
                  </label>
                  <div class="col-lg-6">
                    <input type="file" class="form-control" name="image" accept="image/*" onchange="previewImage(event)">


                  </div>
                  <img src="<%='/upload/' + response.dataValues.image%>" height="50" id="image_view">
                </div>


                <div class="form-group row">
                  <div class="col-lg-8 ml-auto">
                    <button type="submit" class="btn btn-primary">Update</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- #/ container -->
</div>
<!--**********************************
            Content body end
        ***********************************-->

<% include ../footer.ejs %>

<script>
  function validateForm() {
    var x = document.forms["myForm"]["name"].value;
    if (!x.replace(/\s/g, '').length) {
      document.getElementById("p2").style.display = "block";
      return false;
    }else{
      document.getElementById("p2").style.display = "none";
    }
  }
  </script>